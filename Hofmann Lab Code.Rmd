---
title: "Hofmann Lab Code"
author: "Zoe Fung"
date: "10/14/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
# install/load packages
library(tidyverse)
library(readxl)
library(readr)
library(janitor)
library(here)
library(lubridate)
```

## Importing data
```{r}
trisdata <- read_csv(here("data","7.12.2021-tris.csv")) %>%
  filter(row_number()!=c(1:5)) %>% # remove the first 5 rows
  row_to_names(row_number=1) %>% # make the top row the column headers
  clean_names() %>% # clean up column header names
  mutate(date_lubridate=mdy(date)) %>% # tell R "date" is a DATE
  mutate(time_lubridate=hms(time)) %>% # tell R "time" is a TIME
  unite(date_time, c(date, time), sep = " ", remove = TRUE) %>% # combine the date and time columns
  mutate(date_time_lubridate=mdy_hms(date_time)) # tell R "date_time" is a DATE and a TIME
```

## Creating the OMEGAS table
```{r}
omegas <- data.frame(trisdata$voltage_1_m_v,trisdata$voltage_2_m_v,trisdata$voltage_3_m_v,trisdata$voltage_4_m_v) %>% # create OMEGAS data frame with the tris voltages
  mutate(mv1=as.numeric(trisdata.voltage_1_m_v),
         mv2=as.numeric(trisdata.voltage_2_m_v),
         mv3=as.numeric(trisdata.voltage_3_m_v),
         mv4=as.numeric(trisdata.voltage_4_m_v)) %>% # changing data to numeric arguments
  select(mv1, mv2, mv3, mv4) # cleaning data frame

# converting the mV to volts
omegas_v <- omegas %>%
  mutate(v1=(mv1/1000),
         v2=(mv2/1000),
         v3=(mv3/1000),
         v4=(mv4/1000))
      
# calculating Rthermistor

mutate(omegas$vbattery=((voltage2/100)*101.57)) # create vbattery column 
  # how do we apply mutate for dependent value columns? 
mutate(omgeas$z=((voltage4/100)+vbattery*(15000/(1000000+15000)))) # create intermediate column k
mutate(omegas$y=(z*1000000)) # create intermediate column l
mutate(omegas$rthermistor=y/(vbattery-z)) # create Rthermistor column
       
```